<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="VoiceIntake AI - Voice-first medical documentation assistant powered by Google MedASR and MedGemma">
    <meta name="theme-color" content="#6366F1">
    <title>VoiceIntake AI | Voice-First Medical Documentation</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéôÔ∏è</text></svg>">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <!-- Logo -->
            <div class="logo-container">
                <div class="brand-logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                        <line x1="12" y1="19" x2="12" y2="23" />
                        <line x1="8" y1="23" x2="16" y2="23" />
                    </svg>
                    <span class="brand-name">VoiceIntake<span class="brand-ai">AI</span></span>
                </div>
            </div>

            <h1>Voice Symptom Documentation Assistant</h1>
            <p class="subtitle">AI-Powered Medical Transcription & Structured Notes</p>

            <!-- Compliance Notice -->
            <div class="compliance-notice">
                <strong>
                    <svg class="notice-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                        <line x1="12" y1="9" x2="12" y2="13" />
                        <line x1="12" y1="17" x2="12.01" y2="17" />
                    </svg>
                    Compliance Notice
                </strong>
                This system provides administrative documentation support only.
                It does not perform clinical triage, provide medical advice, or make clinical decisions.
                All outputs require review by qualified healthcare professionals.
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Recording Section -->
            <section class="recording-section">
                <h2>Record Symptom Report</h2>

                <!-- Audio Recording Controls -->
                <div class="audio-controls">
                    <button id="recordBtn" class="btn btn-record">
                        <svg class="btn-svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                            <line x1="12" y1="19" x2="12" y2="23" />
                            <line x1="8" y1="23" x2="16" y2="23" />
                        </svg>
                        Start Recording
                    </button>
                    <button id="stopBtn" class="btn btn-stop" disabled>
                        <svg class="btn-svg-icon" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="6" y="6" width="12" height="12" rx="2" />
                        </svg>
                        Stop Recording
                    </button>
                    <button id="playBtn" class="btn btn-play" disabled>
                        <svg class="btn-svg-icon" viewBox="0 0 24 24" fill="currentColor">
                            <polygon points="5 3 19 12 5 21 5 3" />
                        </svg>
                        Play Recording
                    </button>
                </div>

                <!-- Audio Visualizer -->
                <div id="audioVisualizer" class="audio-visualizer">
                    <canvas id="visualizerCanvas" width="600" height="100"></canvas>
                </div>

                <!-- OR Divider -->
                <div class="divider">
                    <span>OR</span>
                </div>

                <!-- Text Input -->
                <div class="text-input-section">
                    <label for="textInput" class="text-label">
                        <svg class="text-svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="4 7 4 4 20 4 20 7" />
                            <line x1="9" y1="20" x2="15" y2="20" />
                            <line x1="12" y1="4" x2="12" y2="20" />
                        </svg>
                        Type Symptoms Directly
                    </label>
                    <textarea id="textInput" class="text-input"
                        placeholder="Enter patient symptoms here (e.g., 'Sore throat for 48 hours with mild fever')"
                        rows="4"></textarea>
                </div>

                <!-- Submit Button -->
                <button id="submitBtn" class="btn btn-primary" disabled>
                    Generate Documentation
                    <svg class="btn-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="5" y1="12" x2="19" y2="12" />
                        <polyline points="12 5 19 12 12 19" />
                    </svg>
                </button>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <h2>Documentation Results</h2>

                <!-- Loading Indicator -->
                <div id="loadingIndicator" class="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Processing and generating documentation...</p>
                </div>

                <!-- Transcription -->
                <div class="result-card" id="transcriptionCard" style="display: none;">
                    <h3>
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14 2 14 8 20 8" />
                            <line x1="16" y1="13" x2="8" y2="13" />
                            <line x1="16" y1="17" x2="8" y2="17" />
                            <polyline points="10 9 9 9 8 9" />
                        </svg>
                        Transcription
                    </h3>
                    <div id="transcriptionText" class="transcription-text"></div>

                    <!-- Audio Playback for Verification -->
                    <div id="audioPlaybackSection" class="audio-playback-section" style="display: none;">
                        <div class="audio-playback-header">
                            <svg class="audio-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                                <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
                                <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
                            </svg>
                            <span>Original Recording</span>
                            <span class="audio-verification-badge">For Verification</span>
                        </div>
                        <audio id="resultAudioPlayer" controls class="audio-player">
                            Your browser does not support the audio element.
                        </audio>
                        <p class="audio-playback-note">
                            Listen to the original recording to verify transcription accuracy.
                        </p>
                    </div>

                    <!-- Text Input Indicator (shown when text was entered instead of voice) -->
                    <div id="textInputIndicator" class="text-input-indicator" style="display: none;">
                        <div class="text-input-header">
                            <svg class="text-input-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="4 7 4 4 20 4 20 7" />
                                <line x1="9" y1="20" x2="15" y2="20" />
                                <line x1="12" y1="4" x2="12" y2="20" />
                            </svg>
                            <span>Text Input</span>
                            <span class="text-input-badge">Manual Entry</span>
                        </div>
                        <p class="text-input-note">
                            Symptoms were entered via text input. No audio recording available.
                        </p>
                    </div>

                    <p class="duration-info">Duration: <span id="audioDuration">0</span> seconds</p>
                </div>

                <!-- Documentation -->
                <div class="result-card" id="documentationCard" style="display: none;">
                    <h3>
                        <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M9 11H3v10h6V11z" />
                            <path d="M21 3h-6v18h6V3z" />
                            <path d="M15 7H9v14h6V7z" />
                        </svg>
                        Structured Documentation
                    </h3>

                    <!-- Clinician Review Notice -->
                    <div class="review-notice">
                        <strong>
                            <svg class="notice-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <line x1="12" y1="16" x2="12" y2="12" />
                                <line x1="12" y1="8" x2="12.01" y2="8" />
                            </svg>
                            Requires Clinician Review
                        </strong>
                        <p>This documentation must be reviewed and finalized by a qualified healthcare professional.</p>
                    </div>

                    <!-- Chief Complaint -->
                    <div class="doc-section">
                        <h4>Chief Complaint</h4>
                        <p id="chiefComplaint"></p>
                    </div>

                    <!-- Symptom Details -->
                    <div class="doc-section">
                        <h4>Symptom Details</h4>
                        <div id="symptomDetails"></div>
                    </div>

                    <!-- SOAP Note -->
                    <div class="doc-section">
                        <h4>SOAP Note ‚Äî Subjective Section</h4>
                        <div id="soapNote" class="soap-note"></div>
                    </div>

                    <!-- Export Buttons -->
                    <div class="export-buttons">
                        <button id="exportJsonBtn" class="btn btn-secondary">
                            <svg class="btn-svg-icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                            Export JSON
                        </button>
                        <button id="copyBtn" class="btn btn-secondary">
                            <svg class="btn-svg-icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                            </svg>
                            Copy to Clipboard
                        </button>
                    </div>
                </div>

                <!-- Error Display -->
                <div class="error-card" id="errorCard" style="display: none;">
                    <h3>
                        <svg class="error-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="15" y1="9" x2="9" y2="15" />
                            <line x1="9" y1="9" x2="15" y2="15" />
                        </svg>
                        Error
                    </h3>
                    <p id="errorText"></p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-brand">
                <svg class="footer-logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                    <line x1="12" y1="19" x2="12" y2="23" />
                    <line x1="8" y1="23" x2="16" y2="23" />
                </svg>
                <span class="footer-brand-name">VoiceIntake<span class="footer-brand-ai">AI</span></span>
            </div>
            <p class="footer-version">Voice Symptom Documentation Assistant v1.0</p>
            <p class="footer-disclaimer">
                Administrative documentation tool. Not intended for clinical decision-making.
            </p>
            <p class="footer-tech">
                Powered by Google MedASR & MedGemma | Built with FastAPI
            </p>
            <div class="footer-links">
                <a href="https://github.com" target="_blank" rel="noopener">GitHub</a>
                <a href="https://developers.google.com/health-ai-developer-foundations" target="_blank"
                    rel="noopener">Google Health AI</a>
            </div>
            <p class="footer-copyright">&copy; 2026 VoiceIntake AI. Open Source Project.</p>
        </footer>
    </div>

    <script src="/static/js/app.js"></script>
</body>

</html>